<!doctype html>
<html>
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="generator" content="pandoc">
      <meta name="author" content="Ashkan Mirzaee">
      <meta name="description" content="An introduction tutorial for using Unix shell">
      <title>The Unix Shell</title>
      <!-- Bootstrap -->
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
      <!-- Font-awesome -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <!-- Styles -->
      <link rel="stylesheet" href="https://ashki23.github.io/styles.css">
            <!-- favicon -->
            <link rel="icon" href="images/AM.jpg">
            <!-- google-site-verification -->
            <meta name="google-site-verification" content="lD_nifpQ-CA6LaDwxYJbe5bq0oa6Ir0Ax-txvtdP51E">
            <!-- bing-site-verification -->
            <meta name="msvalidate.01" content="89BCD3FF42B6E9FE48E0C8365767D11B">
         </head>
   <body>
            <nav class="navbar fixed-top navbar-expand-lg navbar-dark bd-navbar">
               <a class="navbar-brand" href="index.html">Ashkan Mirzaee</a>
               <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" style="border: none; outline: none; padding-right: 0; padding-left: 1rem;">
               <span class="navbar-toggler-icon"></span>
               </button>
               <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <ul class="navbar-nav mr-auto">
                     <li class="nav-item">
                        <a class="nav-link" href="page1.html">Blog</a>
                     </li>
                     <li class="nav-item">
                        <a class="nav-link" href="tutorials.html">Tutorials</a>
                     </li>
            	 <li class="nav-item">
                        <a class="nav-link" href="research.html">Research</a>
                     </li>
            	 <li class="nav-item">
                        <a class="nav-link" href="blogroll.html">Blogroll</a>
                     </li>
                  </ul>
                  <ul class="navbar-nav ml-auto">
            	<li class="nav-item">
            	  <a class="nav-link" href="contact.html" aria-label="Contact">
            	    <span class="fa fa-envelope fa-lg"></a>
            	</li>
            	<li class="nav-item">
            	  <a class="nav-link" href="https://github.com/ashki23" target="_blank" rel="noopener" aria-label="GitHub">
            	    <span class="fa fa-github fa-lg"></span></a>
            	</li>
            	<li class="nav-item">
            	  <a class="nav-link" href="https://gitlab.com/ashki23" target="_blank" rel="noopener" aria-label="GitLab">
            	    <span class="fa fa-gitlab fa-lg"></span></a>
            	</li>
            	<li class="nav-item">
            	  <a class="nav-link" href="https://www.linkedin.com/in/ashkan-mirzaee/" target="_blank" rel="noopener" aria-label="Linkedin">
            	    <span class="fa fa-linkedin fa-lg"></span></a>
            	</li>
                  </ul>
               </div>
            </nav>
            <div class="container">
         <h1 class="title">The Unix Shell</h1>
                  <div class="row">
            <div class="col-xl-10"><p>The Shell is a program which uses command-line interface, instead of graphical user interfaces (GUI), to run other programs rather than doing calculations itself. The most popular Unix Shell is Bash which is accessible by <code>ctrl+alt+t</code> keyboard shortcut in Linux computers. The following are some great Shell tutorials:</p>
<ul>
<li><a href="http://swcarpentry.github.io/shell-novice/">The Unix Shell</a></li>
<li><a href="http://swcarpentry.github.io/shell-extras/">Extra Unix Shell Material</a></li>
<li><a href="https://hpc-carpentry.github.io/hpc-shell/">Introduction to using the shell in a High-Performance Computing context</a></li>
</ul>
<p>This tutorial provides a reference of some practical commands in the Unix Shell and important text editors in Bash.</p>
<hr />
<h2 id="tab-completion">Tab completion</h2>
<p>In the Unix Shell we can use <strong>tab completion</strong> to type commands faster and easier. To do that press <code>tab</code> after typing the beginning of your command and let Bash complete the command. If there are more than one function or directory corresponded to the beginning that you typed, Bash will not return anything if your press <code>tab</code> once. In this case, if you press <code>tab</code> for the second time Bash will show all the options.</p>
<h2 id="wildcards">Wildcards</h2>
<p>A string is a wildcard pattern if it contains one of the characters <code>?</code>, <code>*</code> or <code>[</code>. Globbing is the operation that expands a wildcard pattern into the list of pathnames matching the pattern. For more information on globbing pathnames typing <code>man 7 glob</code>.</p>
<p><strong>Matching:</strong></p>
<ul>
<li>A <code>?</code> matches any single character. For example, <code>hd?</code> would look for <code>hda</code>, <code>hdb</code>, <code>hdc</code> and every other letter/number between <code>a-z</code>, <code>0-9</code></li>
<li>A <code>*</code> matches any string, including the empty string. For example, <code>hd*</code> would look for <code>hd</code>, <code>hdf</code>, <code>hd-full</code>, and anything that starts with <code>hd</code> also including <code>hd</code> itself. And <code>m*l</code> could by <code>mail</code>, <code>mall</code>, <code>ml</code>, and anything that starts with an <code>m</code> and ends with an <code>l</code></li>
</ul>
<p><strong>Character classes:</strong></p>
<ul>
<li>An expression <code>[  ]</code>, where the first character after the leading <code>[</code> is not an <code>!</code>, matches any of the characters enclosed by the brackets. For example, <code>m[a-d]m</code> can become anything that starts and ends with <code>m</code> and has any character <code>a</code> to <code>d</code> in between.</li>
<li>An expression <code>[! ]</code>, where the first character after the leading <code>[</code> is an <code>!</code>, matches any character that is not enclosed by the brackets.</li>
</ul>
<h2 id="shell-expansions">Shell Expansions</h2>
<ul>
<li>Brace expansion: is a mechanism by which arbitrary strings may be generated for example <code>echo 1{2,3}4</code> returns 124 and 134 or <code>echo {1..3}</code> returns 1,2, and 3</li>
<li>Command substitution: it allows the output of a command to replace the command itself for example, <code>echo $(date)</code> returns the actual date. Note that for the environmental variables you cannot use <code>()</code>, for example <code>echo $HOME</code> or <code>echo ${HOME}</code> is the correct way</li>
</ul>
<hr />
<h2 id="basic-commands">Basic commands</h2>
<p>The following is a list of basic Bash commands. You may find a short explanation next to each command.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">man</span> command <span class="co"># user manual of the command (enter q to exit)</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="bu">command</span> --help <span class="co"># display brief help</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">date</span> <span class="co"># show date and time </span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="ex">hostnme</span> <span class="co"># show the host nsme</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">w</span> <span class="co"># show current users</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">whoami</span> <span class="co"># show the user name</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">id</span> <span class="co"># shows your id</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">passwd</span> <span class="co"># change user password</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="ex">nproc</span> <span class="co"># show number of processors</span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="ex">lscpu</span> <span class="co"># list CPU, display information about the CPU architecture</span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="fu">free</span> -h <span class="co"># show amount of memory RAM </span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="fu">ps</span> <span class="co"># report a snapshot of the current processes</span></span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="bu">pwd</span> <span class="co"># print working directory</span></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="bu">cd</span> <span class="co"># change directory</span></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="bu">cd</span> .. <span class="co"># back to the previous directory</span></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="bu">cd</span> ~ <span class="co"># change to the home directory</span></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="bu">cd</span> / <span class="co"># change to the system files directory</span></span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="fu">ls</span> <span class="co"># lists</span></span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="fu">ls</span> -a <span class="co"># lists all</span></span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="fu">ls</span> -al <span class="co"># lists all long</span></span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="fu">file</span> <span class="co"># determine file type</span></span>
<span id="cb1-22"><a href="#cb1-22"></a><span class="fu">cp</span> <span class="co"># copy a file </span></span>
<span id="cb1-23"><a href="#cb1-23"></a><span class="fu">cp</span> -r <span class="co"># copy a directory</span></span>
<span id="cb1-24"><a href="#cb1-24"></a><span class="fu">ln</span> <span class="co"># make links between files</span></span>
<span id="cb1-25"><a href="#cb1-25"></a><span class="fu">scp</span> <span class="co"># secure copy a file</span></span>
<span id="cb1-26"><a href="#cb1-26"></a><span class="fu">scp</span> -r <span class="co"># secure copy a directory</span></span>
<span id="cb1-27"><a href="#cb1-27"></a><span class="ex">sftp</span> <span class="co"># secure file transfer program (SSH file transfer protocol)</span></span>
<span id="cb1-28"><a href="#cb1-28"></a><span class="fu">wget</span> <span class="co"># the non-interactive network downloader (-O &lt;newname&gt; to rename)</span></span>
<span id="cb1-29"><a href="#cb1-29"></a><span class="ex">md5sum</span> <span class="co"># compute MD5 message digest</span></span>
<span id="cb1-30"><a href="#cb1-30"></a><span class="ex">md5sum</span> -c <span class="co"># check MD5 message digest</span></span>
<span id="cb1-31"><a href="#cb1-31"></a><span class="fu">tar</span> -xzf <span class="co"># extract (x) a zip (z) file (f)</span></span>
<span id="cb1-32"><a href="#cb1-32"></a><span class="fu">tar</span> -czf <span class="co"># create (c) a zip (z) file (f)</span></span>
<span id="cb1-33"><a href="#cb1-33"></a><span class="fu">mv</span> <span class="co"># move</span></span>
<span id="cb1-34"><a href="#cb1-34"></a><span class="fu">rm</span> <span class="co"># remove file</span></span>
<span id="cb1-35"><a href="#cb1-35"></a><span class="fu">rm</span> -r <span class="co"># remove a directory</span></span>
<span id="cb1-36"><a href="#cb1-36"></a><span class="fu">mkdir</span> <span class="co"># make a directory</span></span>
<span id="cb1-37"><a href="#cb1-37"></a><span class="fu">rmdir</span> <span class="co"># remove an empty directory</span></span>
<span id="cb1-38"><a href="#cb1-38"></a><span class="fu">install</span> -dvp <span class="co"># make a directory (-d), verbose (-v) and parent (-p)</span></span>
<span id="cb1-39"><a href="#cb1-39"></a><span class="fu">cat</span> <span class="co"># concatenate files and print on the standard output</span></span>
<span id="cb1-40"><a href="#cb1-40"></a><span class="fu">zcat</span> <span class="co"># concatenate compressed (zip) files </span></span>
<span id="cb1-41"><a href="#cb1-41"></a><span class="fu">less</span> <span class="co"># to view the contents of a text file one screen at a time (less than a text editor)</span></span>
<span id="cb1-42"><a href="#cb1-42"></a><span class="fu">touch</span> <span class="co"># generate a new file that contains no data</span></span>
<span id="cb1-43"><a href="#cb1-43"></a><span class="fu">chmod</span> <span class="co"># change file mode for user (u), group (g) or other (o) to give (+) or take (-) permission for read (r), write (w), or execute (x) (example chmod u+r)</span></span>
<span id="cb1-44"><a href="#cb1-44"></a><span class="bu">echo</span> <span class="co"># display a line of text ex. echo === $(date)</span></span>
<span id="cb1-45"><a href="#cb1-45"></a><span class="fu">cut</span> <span class="co"># cut sections from each line of files</span></span>
<span id="cb1-46"><a href="#cb1-46"></a><span class="fu">cut</span> -f <span class="op">&lt;</span>field number<span class="op">&gt;</span> -d <span class="op">&lt;</span>delimiter<span class="op">&gt;</span> <span class="co"># cut field number based on the delimiter</span></span>
<span id="cb1-47"><a href="#cb1-47"></a><span class="fu">grep</span> <span class="co"># print lines matching a pattern (&quot;global/regular expression/print&quot;)</span></span>
<span id="cb1-48"><a href="#cb1-48"></a><span class="fu">grep</span> -o <span class="co"># print only the matched parts</span></span>
<span id="cb1-49"><a href="#cb1-49"></a><span class="fu">grep</span> -P <span class="co"># interpret the pattern as a Perl-compatible regular expression (PCRE)</span></span>
<span id="cb1-50"><a href="#cb1-50"></a><span class="fu">sed</span> <span class="co"># stream editor for filtering and transforming text</span></span>
<span id="cb1-51"><a href="#cb1-51"></a><span class="fu">tr</span> <span class="co"># translate or delete characters (for example tr -d , removes comma)</span></span>
<span id="cb1-52"><a href="#cb1-52"></a><span class="fu">awk</span> <span class="co"># pattern scanning and text processing language</span></span>
<span id="cb1-53"><a href="#cb1-53"></a><span class="fu">wc</span> <span class="co"># word count; it counts the number of lines, words, and characters in files </span></span>
<span id="cb1-54"><a href="#cb1-54"></a><span class="fu">wc</span> -l <span class="co"># show number of lines</span></span>
<span id="cb1-55"><a href="#cb1-55"></a><span class="fu">nl</span> <span class="co"># number lines of files</span></span>
<span id="cb1-56"><a href="#cb1-56"></a><span class="fu">head</span> -n <span class="op">&lt;</span>number<span class="op">&gt;</span> <span class="co"># output the n first lines of files</span></span>
<span id="cb1-57"><a href="#cb1-57"></a><span class="fu">tail</span> -n <span class="op">&lt;</span>number<span class="op">&gt;</span> <span class="co"># output the n last lines of files</span></span>
<span id="cb1-58"><a href="#cb1-58"></a><span class="fu">sort</span> <span class="co"># sort lines of text files (use flag -r for reverse)</span></span>
<span id="cb1-59"><a href="#cb1-59"></a><span class="fu">sort</span> -n <span class="co"># sort numeric</span></span>
<span id="cb1-60"><a href="#cb1-60"></a><span class="fu">uniq</span> <span class="co"># remove adjacent duplicated lines from input</span></span>
<span id="cb1-61"><a href="#cb1-61"></a><span class="fu">uniq</span> -c <span class="co"># remove adjacent duplicated lines and prefix lines by the number of occurrences</span></span>
<span id="cb1-62"><a href="#cb1-62"></a><span class="fu">find</span> <span class="co"># search for files in a directory hierarchy</span></span>
<span id="cb1-63"><a href="#cb1-63"></a><span class="bu">history</span> <span class="co"># show history of commnads</span></span>
<span id="cb1-64"><a href="#cb1-64"></a>!<span class="op">&lt;</span><span class="ex">number</span><span class="op">&gt;</span> <span class="co"># rerun the command with the number from history</span></span>
<span id="cb1-65"><a href="#cb1-65"></a>!! <span class="co"># rerun the last command (bang bang)</span></span>
<span id="cb1-66"><a href="#cb1-66"></a><span class="fu">bc</span> <span class="co"># Bash calculator language ex. echo &#39;3 + 4&#39; | bc</span></span>
<span id="cb1-67"><a href="#cb1-67"></a><span class="fu">clear</span> (ctrl+l) <span class="co"># clear terminal</span></span>
<span id="cb1-68"><a href="#cb1-68"></a><span class="bu">exit</span> (ctrl+d) <span class="co"># to exit</span></span></code></pre></div>
<p>For practice, let’s create two text files including some names and grades by <code>cat</code> command in <code>bash_test</code> directory:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">mkdir</span> bash_test</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="bu">cd</span> bash_text</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="fu">cat</span> <span class="op">&gt;</span> names.txt</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="ex">Dori</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="ex">Ari</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="ex">Ashi</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="ex">Jackie</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="ex">Dori</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co"># press `ctrl+d` to exit</span></span>
<span id="cb2-11"><a href="#cb2-11"></a></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="fu">cat</span> <span class="op">&gt;</span> grade.txt</span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="ex">A</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="ex">B+</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="ex">A-</span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="ex">A</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="ex">B</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="co"># press `ctrl+d` to exit</span></span>
<span id="cb2-19"><a href="#cb2-19"></a></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="fu">ls</span></span></code></pre></div>
<p><code>ls</code> command returns <code>grade.txt  names.txt</code> that shows we already made the files. Now, let’s see head, tail and number of lines in both files:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">head</span> -n 3 n*.txt</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="bu">echo</span> ---</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="fu">tail</span> -n 3 g*.txt</span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="bu">echo</span> ---</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="fu">wc</span> -l [n,g]*.txt</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">## Dori</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">## Ari</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">## Ashi</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">## ---</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">## A-</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">## A</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">## B</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">## ---</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co">##  5 grade.txt</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">##  5 names.txt</span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="co">## 10 total</span></span></code></pre></div>
<p>For finding things we can use <code>grep</code> or “global/regular expression/print” command. For example, let’s find lines that contain the letter “D”:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">grep</span> D names.txt</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">## Dori</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">## Dori</span></span></code></pre></div>
<p>There are several options that we can use for <code>grep</code> command. For example, <code>grep -w</code> is searching for the exact word, <code>-n</code> option shows numbers the lines that match, <code>-i</code> flag makes our search case-insensitive, or <code>-v</code> inverts our search to the lines that do not contain the pattern, or <code>-o</code> print only the matched parts, and <code>-P</code> flag for using Perl-compatible <a href="https://docs.python.org/3/library/re.html#re-syntax">regular expression</a>. To see all the option use <code>man grep</code>. Lets’ try to find lines which do not contain letter “d” or “D”:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">grep</span> -inv d names.txt</span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">## 2:Ari</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">## 3:Ashi</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">## 4:Jackie</span></span></code></pre></div>
<p>While <code>grep</code> finds lines in files, the <code>find</code> command finds files themselves. For instance, in directory <code>bash_test</code> command <code>find .</code> will shows all files and directories within the current directory. The following command will return number of lines in <code>names.txt</code> and <code>grade.txt</code> files in the directory:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">wc</span> -l <span class="va">$(</span><span class="fu">find</span> . -name <span class="st">&#39;[n,g]*.txt&#39;</span><span class="va">)</span></span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">##  5 ./grade.txt</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">##  5 ./names.txt</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">## 10 total</span></span></code></pre></div>
<p>For another example, you may use the command in below to print a divider, like <code>===</code>, followed by date and hostname:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="bu">echo</span> === <span class="va">$(</span><span class="fu">hostname</span><span class="va">)</span> <span class="va">$(</span><span class="fu">date</span><span class="va">)</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co"># Or</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="bu">echo</span> === <span class="va">$(</span><span class="fu">hostname</span><span class="va">)</span> <span class="st">&quot;date: </span><span class="va">$(</span><span class="fu">date</span><span class="va">)</span><span class="st">&quot;</span></span></code></pre></div>
<hr />
<h2 id="pipes-and-filters">Pipes and Filters</h2>
<p>Now that we know a few basic commands, we can combine the programs and commands in new ways. The following commands let us to use output of a command as an input for another command or store the outputs of commands in a separate file.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1"></a><span class="ex">first</span> <span class="kw">|</span> <span class="ex">second</span> <span class="co"># is a pipeline; the output of the first command is used as the input to the second </span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="bu">command</span> <span class="op">&gt;</span> file <span class="co"># redirects a command’s output to a file (overwriting any existing content)</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="bu">command</span> <span class="op">&gt;&gt;</span> file <span class="co"># appends a command’s output to a file</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="op">&lt;</span> <span class="co"># operator redirects input to a command</span></span></code></pre></div>
<p>For example let’s remove the duplicated names in the <code>names.txt</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">sort</span> names.txt <span class="kw">|</span> <span class="fu">uniq</span> </span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="bu">echo</span> --- To count number of occurrences ---</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="fu">sort</span> names.txt <span class="kw">|</span> <span class="fu">uniq</span> -c</span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co">## Ari</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="co">## Ashi</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co">## Dori</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">## Jackie</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">## --- To count number of occurrences ---</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">##       1 Ari</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="co">##       1 Ashi</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co">##       2 Dori</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co">##       1 Jackie</span></span></code></pre></div>
<p>Or make a new file, <code>count.txt</code>, including number of lines, words, and characters in the text files:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">wc</span> [n,g]*.txt <span class="op">&gt;</span> count.txt</span></code></pre></div>
<p>Use <code>cat count.txt</code> to see the file content. Also, you may use:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">cat</span> count.txt</span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">wc</span> -l <span class="op">&lt;</span> count.txt</span>
<span id="cb11-3"><a href="#cb11-3"></a></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co">##  5  5 12 grade.txt</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co">##  5  5 26 names.txt</span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co">## 10 10 38 total</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="co">## 3</span></span></code></pre></div>
<p>To find number of lines in the <code>count.txt</code>. Note that you also can use <code>wc -l count.txt</code> to find the number of lines.</p>
<hr />
<h2 id="loops-and-conditional-constructs">Loops and conditional constructs</h2>
<p>Loops are key to productivity improvements through automation as they allow us to execute commands repeatedly. Similar to wildcards and tab completion, using loops also reduces the amount of typing and mistakes. The syntax is:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">for</span> <span class="ex">variable</span> in file1 file2 ...<span class="kw">;</span> <span class="kw">do</span> <span class="ex">command_1</span> <span class="va">$variable</span><span class="kw">;</span> <span class="ex">command_2</span><span class="kw">;</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">done</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="co"># Or</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="kw">for</span> <span class="ex">output</span> in <span class="va">$(</span><span class="bu">command</span><span class="va">)</span><span class="kw">;</span>  <span class="kw">do</span> <span class="ex">command_1</span> <span class="va">$output</span><span class="kw">;</span> <span class="ex">command_2</span><span class="kw">;</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">done</span></span></code></pre></div>
<p>For instance, let’s make a copy of <code>grade.txt</code> and <code>names.txt</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">for</span> <span class="ex">x</span> in [g,n]*.txt<span class="kw">;</span> <span class="kw">do</span> <span class="fu">cp</span> <span class="va">$x</span> copy-<span class="va">$x</span><span class="kw">;</span> <span class="bu">echo</span> copy-<span class="va">$x</span><span class="kw">;</span> <span class="kw">done</span></span>
<span id="cb13-2"><a href="#cb13-2"></a></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="co">## copy-grade.txt</span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co">## copy-names.txt</span></span></code></pre></div>
<p>Use <code>ls</code> to see new files that start with <code>copy-</code> in your directory. Another example,</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">for</span> <span class="ex">y</span> in <span class="va">$(</span><span class="fu">seq</span> 1 3<span class="va">)</span><span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> <span class="st">&quot;The number is </span><span class="va">$y</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">done</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="bu">echo</span> --- Same as ---</span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="kw">for</span> <span class="ex">y</span> in <span class="dt">{1..3}</span><span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> <span class="st">&quot;The number is </span><span class="va">$y</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">done</span></span>
<span id="cb14-4"><a href="#cb14-4"></a></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="co">## The number is 1</span></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="co">## The number is 2</span></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="co">## The number is 3</span></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="co">## --- Same as ---</span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="co">## The number is 1</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co">## The number is 2</span></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="co">## The number is 3</span></span></code></pre></div>
<p>Conditional statements help us to write an <code>if</code> construction. In general we can write the test statement by <code>[ Expression ]</code>. The syntax is:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">if</span><span class="bu"> [</span> Expression<span class="bu"> ]</span>; <span class="kw">then</span> <span class="bu">command</span><span class="kw">;</span> <span class="kw">elif</span><span class="bu"> [</span> Expression<span class="bu"> ]</span>; <span class="kw">then</span> <span class="bu">command</span><span class="kw">;</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">else</span> <span class="bu">command</span><span class="kw">;</span> <span class="kw">fi</span></span></code></pre></div>
<p>For example, let’s print “File exist” if <code>count.txt</code> is exist (note that there is a space after <code>[</code> and before <code>]</code>):</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-e</span> count.txt<span class="bu"> ]</span>; <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;File exist&quot;</span><span class="kw">;</span> <span class="kw">else</span> <span class="bu">echo</span> <span class="st">&quot;File does not exist&quot;</span><span class="kw">;</span> <span class="kw">fi</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="bu">echo</span> --- Or ---</span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">!</span> <span class="ot">-e</span> count.txt<span class="bu"> ]</span>; <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;File does not exist&quot;</span><span class="kw">;</span> <span class="kw">else</span> <span class="bu">echo</span> <span class="st">&quot;File exist&quot;</span><span class="kw">;</span> <span class="kw">fi</span></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="bu">echo</span> --- Or ---</span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">!</span> <span class="ot">-e</span> count.txt<span class="bu"> ]</span>; <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;File does not exist&quot;</span><span class="kw">;</span> <span class="kw">elif</span><span class="bu"> [</span> <span class="ot">-e</span> count.txt<span class="bu"> ]</span>; <span class="kw">then</span>  <span class="bu">echo</span> <span class="st">&quot;File exist&quot;</span><span class="kw">;</span> <span class="kw">else</span> <span class="bu">echo</span> <span class="st">&quot;NA&quot;</span><span class="kw">;</span> <span class="kw">fi</span></span>
<span id="cb16-6"><a href="#cb16-6"></a></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="co">## File exist</span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="co">## --- Or ---</span></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="co">## File exist</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="co">## --- Or ---</span></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="co">## File exist</span></span></code></pre></div>
<p>To see all the test expressions see <code>man test</code>.</p>
<hr />
<h2 id="text-editors">Text editors</h2>
<p>Most popular text editors in Bash:</p>
<ul>
<li>Vi</li>
<li>Nano</li>
<li>Emacs</li>
</ul>
<p>To open the text editors simply run <code>vi</code>, <code>nano</code> or <code>emacs -nw</code>. You may use <code>ctrl+z</code> to suspend the editor and return to the Bash terminal and enter <code>fg</code> in the Bash terminal to return the editor. To exit, in Vi first press <code>esc</code> and then enter <code>:q!</code>, in Nano you may use <code>ctrl+x</code>, and in Emacs <code>ctrl+x ctrl+c</code>. Vi and Emacs have more futures in comparison to Nano but they are more difficult as well.</p>
<p>The following are some important commands in Nano. Note that <code>^</code> is <code>ctrl</code> and <code>M-</code> is <code>alt</code>.</p>
<ul>
<li><code>^s</code>: save</li>
<li><code>^o</code>: write out (save with a new name)</li>
<li><code>^x</code>: exit</li>
<li><code>^z</code>: suspend nano (if activated)</li>
<li><code>^k</code>: cut the line</li>
<li><code>M-6</code>: copy the line</li>
<li><code>^u</code>: uncut/paste the line</li>
<li><code>^w</code>: where is (search)</li>
<li><code>^\</code>: search and replace</li>
<li><code>M-g</code>: go to line</li>
<li><code>M-a</code>: select text</li>
<li><code>M-u</code>: undo</li>
<li><code>M-e</code>: redo</li>
<li><code>^t</code>: spelling check (need to install <code>spell</code> package)</li>
<li><code>^j</code>: justify text</li>
<li><code>^g</code>: help (<code>F2</code>)</li>
</ul>
<p>The following are some important commands in Emacs. Note that <code>C-</code> is <code>ctrl</code> and <code>M-</code> is <code>alt</code>.</p>
<ul>
<li><code>C-x C-c</code>: exit</li>
<li><code>C-z</code>: suspend</li>
<li><code>C-k</code>: kill the line</li>
<li><code>C-w</code>: cut the line/text</li>
<li><code>M-w</code>: copy the line/text</li>
<li><code>C-y</code>: uncut/paste the line/text (yank)</li>
<li><code>C-space arrow keys</code>: select text</li>
<li><code>C-shift arrow keys</code>: select paragraphs</li>
<li><code>C-x u</code>: undo</li>
<li><code>C-a</code>: move to the beginning of the line</li>
<li><code>C-e</code>: move to the end of the line</li>
<li><code>C-home</code>: move to the beginning of the buffer</li>
<li><code>C-end</code>: move to the end of the buffer</li>
<li><code>M-g g</code>: go to line</li>
<li><code>C-s</code>/<code>C-r</code>: search</li>
<li><code>M-%</code>: replace (<code>y</code> yes, <code>n</code> no, <code>!</code> all)</li>
<li><code>C-g</code>: stop a command</li>
<li><code>C-x C-f</code>: make/open a file as a new buffer</li>
<li><code>C-x b</code>: change the buffer</li>
<li><code>C-x k</code>: kill the buffer</li>
<li><code>C-x 1</code>: close other windows</li>
<li><code>C-x 0</code>/<code>q</code>: close/quit windows</li>
<li><code>C-x o</code>: switch to other windows</li>
<li><code>C-h ?</code>: help list</li>
<li><code>C-h t</code>: tutorial</li>
<li><code>C-h d</code>: search help for a pattern</li>
<li><code>C-h c</code>: show help for the command</li>
<li><code>M-x &lt;command&gt;</code>: run commands</li>
<li><code>M-x ispell</code>: spell check; enter the suggested <code>digit</code> or <code>a</code> to accept or <code>r</code> to rewrite</li>
<li><code>M-x package-install</code>: install packages</li>
<li><code>M-x package-list-packages</code>: list of packages</li>
</ul>
<p>You may find more about Emacs in <a href="https://ashki23.github.io/emacs.html">here</a>.</p>
<hr />
<h2 id="shell-script">Shell script</h2>
<p>Now, we can make Shell script to crate a small program including Bash commands and other programs that we want. Let’s make a program to shows rows 3 to 5 of a file in Shell scripts. Use <code>nano script.sh</code> to open <code>nano</code> text editor to make <code>script.sh</code> and insert the following lines:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="fu">sort</span> names.txt <span class="kw">|</span> <span class="fu">head</span> -n 5 <span class="kw">|</span> <span class="fu">tail</span> -n 3</span></code></pre></div>
<p>The first line shows the language of the program which is Bash in here. To run the program use:</p>
<pre class="{bash}"><code>bash script.sh</code></pre>
<p>You may use the following program to show rows 3 to 5 of a given file. Use <code>nano script_1.sh</code> and insert the following lines:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="fu">sort</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">head</span> -n 5 <span class="kw">|</span> <span class="fu">tail</span> -n 3</span></code></pre></div>
<p>To run the code use:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">bash</span> script_1.sh names.txt</span>
<span id="cb20-2"><a href="#cb20-2"></a></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="co">## Dori</span></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="co">## Dori</span></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="co">## Jackie</span></span></code></pre></div>
<p>Also we can write a program that works for any given files. Use <code>nano script_all.sh</code> and insert the following lines:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="kw">for</span> <span class="ex">line</span> in <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">do</span> <span class="fu">sort</span> <span class="va">$line</span> <span class="kw">|</span> <span class="fu">head</span> -n 5 <span class="kw">|</span> <span class="fu">tail</span> -n 3<span class="kw">;</span> <span class="kw">done</span></span></code></pre></div>
<p>To run the code use:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">bash</span> script_all.sh names.txt grade.txt</span>
<span id="cb22-2"><a href="#cb22-2"></a></span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="co">## Dori</span></span>
<span id="cb22-4"><a href="#cb22-4"></a><span class="co">## Dori</span></span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="co">## Jackie</span></span>
<span id="cb22-6"><a href="#cb22-6"></a><span class="co">## A-</span></span>
<span id="cb22-7"><a href="#cb22-7"></a><span class="co">## B</span></span>
<span id="cb22-8"><a href="#cb22-8"></a><span class="co">## B+</span></span></code></pre></div>
<p>For another example let write a program to find a certain pattern within some files in <code>bash_test</code> directory. Use <code>nano name_select.sh</code> and insert:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="fu">grep</span> -w <span class="va">$1</span> -r <span class="va">$2</span> <span class="kw">|</span> <span class="fu">cut</span> -d : -f 2 <span class="op">&gt;</span> <span class="va">$1</span>.txt</span></code></pre></div>
<p>To find name <code>Dori</code> among all files in the current directory (<code>.</code>) use:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">bash</span> name_select.sh Dori .</span></code></pre></div>
<p>To see the output run <code>cat Dori.txt</code>.</p></div>
            <div class="d-none d-xl-block col-xl-2 bd-toc">
               <ul class="section-nav">
                  <li class="toc-entry"><ul>
<li><a href="#tab-completion">Tab completion</a></li>
<li><a href="#wildcards">Wildcards</a></li>
<li><a href="#shell-expansions">Shell Expansions</a></li>
<li><a href="#basic-commands">Basic commands</a></li>
<li><a href="#pipes-and-filters">Pipes and Filters</a></li>
<li><a href="#loops-and-conditional-constructs">Loops and conditional constructs</a></li>
<li><a href="#text-editors">Text editors</a></li>
<li><a href="#shell-script">Shell script</a></li>
</ul></li>
               </ul>
            </div>
         </div>
               </div>
            <!-- Global site tag (gtag.js) - Google Analytics -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-132464297-1"></script>
            <script>
               window.dataLayer = window.dataLayer || [];
               function gtag(){dataLayer.push(arguments);}
               gtag('js', new Date());
               gtag('config', 'UA-132464297-1');
            </script>
            <!-- footer -->
            <footer class="footer">
               <div align="center">
                  <p class="text-muted">
                     Docs is available under <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener">CC BY-SA 3.0</a>
                     &nbsp;|&nbsp;
                     Code licensed under <a href="https://www.gnu.org/licenses/gpl-3.0.en.html" target="_blank" rel="noopener">GPL-3.0</a>
            	 &nbsp;|&nbsp;
                     Built with <a href="https://github.com/ashki23/pandoc-bootstrap" target="_blank" rel="noopener">pandoc-bootstrap</a> theme
                     <br />
                     Copyright 2018-2020, Ashkan Mirzaee
                  </p>
               </div>
            </footer>
            <!-- jQuery and Bootstrap's JavaScript plugins -->
      <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
      <!-- Mathjax -->
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script>
         /* add Bootstrap styles to tables */
         function bootstrapStylePandocTables() {
         $('tr.header').parent('thead').parent('table').addClass('table table-condensed'); }
         $(document).ready(function () { bootstrapStylePandocTables(); });
         /* adjust the height when click the toc */
         var shiftWindow = function() { scrollBy(0, -60) };
         window.addEventListener("hashchange", shiftWindow);
         function load() { if (window.location.hash) shiftWindow(); }
      </script>
   </body>
</html>
